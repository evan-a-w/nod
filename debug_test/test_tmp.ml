open! Core
open! Import

let map_function_roots ~f functions =
  Map.map ~f:(Function.map_root ~f) functions
;;

let test_cfg s =
  s
  |> Parser.parse_string
  |> Result.map ~f:(map_function_roots ~f:Cfg.process)
  |> function
  | Error e -> Nod_error.to_string e |> print_endline
  | Ok fns ->
    Map.iter
      fns
      ~f:(fun { Function.root = ~root:_, ~blocks:_, ~in_order:blocks; _ } ->
        Vec.iter blocks ~f:(fun block ->
          let instrs =
            Vec.to_list block.Block.instructions @ [ block.terminal ]
          in
          print_s [%message block.id_hum (instrs : Ir.t list)]))
;;

let test_ssa ?don't_opt s =
  test_cfg s;
  print_endline "=================================";
  Parser.parse_string s
  |> Result.map ~f:(map_function_roots ~f:Cfg.process)
  |> Result.map ~f:Eir.set_entry_block_args
  |> Result.map ~f:(map_function_roots ~f:Ssa.create)
  |> function
  | Error e -> Nod_error.to_string e |> print_endline
  | Ok fns ->
    let go fns =
      Map.iter fns ~f:(fun { Function.root = (ssa : Ssa.t); _ } ->
        Vec.iter ssa.in_order ~f:(fun block ->
          let instrs = Vec.to_list block.instructions @ [ block.terminal ] in
          print_s
            [%message
              block.id_hum ~args:(block.args : Var.t Vec.t) (instrs : Ir.t list)]))
    in
    go fns;
    (match don't_opt with
     | Some () -> ()
     | None ->
       print_endline "******************************";
       Eir.optimize fns;
       go fns)
;;

let compile_and_lower ?(opt_flags = Eir.Opt_flags.no_opt) program =
  match Nod.compile ~opt_flags program with
  | Error e -> Nod_error.to_string e |> print_endline
  | Ok functions ->
    let asm = X86_backend.compile_to_asm functions in
    print_endline asm
;;

let test ?dump_crap ?(opt_flags = Eir.Opt_flags.no_opt) s =
  match Eir.compile ~opt_flags s with
  | Error e -> Nod_error.to_string e |> print_endline
  | Ok functions ->
    let x86 = X86_backend.compile ?dump_crap functions in
    print_s
      [%sexp
        (Map.data x86 |> List.map ~f:Function.to_sexp_verbose : Sexp.t list)]
;;

let borked =
  (* Examples.Textual. *)
  {|
root(%x:i64) {
    add %t1:i64, %x, 1
    add %t2:i64, %x, 2
    add %t3:i64, %x, 3
    add %t4:i64, %x, 4
    add %t5:i64, %x, 5
    add %t6:i64, %x, 6
    add %t7:i64, %x, 7
    add %t8:i64, %x, 8
    mul %m1:i64, %t1, %t2
    mul %m2:i64, %t3, %t4
    mul %m3:i64, %t5, %t6
    mul %m4:i64, %t7, %t8
    add %t9:i64, %x, 9
    add %t10:i64, %x, 10
    add %t11:i64, %x, 11
    add %t12:i64, %x, 12
    mul %m5:i64, %t9, %t10
    mul %m6:i64, %t11, %t12
    add %p1:i64, %m1, %m2
    add %p2:i64, %m3, %m4
    add %p3:i64, %m5, %m6
    add %q1:i64, %p1, %p2
    add %result:i64, %q1, %p3
    ret %result
}
|}
;;

let%expect_test "run" =
  let output =
    compile_and_execute
      ~harness:
        (make_harness_source ~fn_name:"root" ~fn_arg_type:"int" ~fn_arg:"2" ())
      ~opt_flags:Eir.Opt_flags.no_opt
      borked
  in
  print_endline output;
  [%expect {| 410 |}]
;;

let%expect_test "borked regaloc" =
  match Nod.compile ~opt_flags:Eir.Opt_flags.no_opt borked with
  | Error e -> Nod_error.to_string e |> print_endline
  | Ok functions ->
    X86_backend.For_testing.print_assignments functions;
    [%expect
      {|
      ((function_name root)
       (assignments
        ((((name m1) (type_ I64)) (Reg ((reg R8) (class_ I64))))
         (((name m2) (type_ I64)) (Reg ((reg R9) (class_ I64))))
         (((name m3) (type_ I64)) (Reg ((reg R10) (class_ I64))))
         (((name m4) (type_ I64)) (Reg ((reg R11) (class_ I64))))
         (((name m5) (type_ I64)) (Reg ((reg R14) (class_ I64))))
         (((name m6) (type_ I64)) (Reg ((reg R12) (class_ I64))))
         (((name p1) (type_ I64)) (Reg ((reg R15) (class_ I64))))
         (((name p2) (type_ I64)) (Reg ((reg R13) (class_ I64))))
         (((name p3) (type_ I64)) (Reg ((reg R14) (class_ I64))))
         (((name q1) (type_ I64)) (Reg ((reg R15) (class_ I64))))
         (((name res__0) (type_ I64)) (Reg ((reg RAX) (class_ I64))))
         (((name result) (type_ I64)) (Reg ((reg R15) (class_ I64))))
         (((name t1) (type_ I64)) (Reg ((reg R8) (class_ I64))))
         (((name t10) (type_ I64)) (Reg ((reg R14) (class_ I64))))
         (((name t11) (type_ I64)) (Reg ((reg R13) (class_ I64))))
         (((name t12) (type_ I64)) (Reg ((reg R15) (class_ I64))))
         (((name t2) (type_ I64)) (Reg ((reg R9) (class_ I64))))
         (((name t3) (type_ I64)) (Reg ((reg R10) (class_ I64))))
         (((name t4) (type_ I64)) (Reg ((reg R11) (class_ I64))))
         (((name t5) (type_ I64)) (Reg ((reg R12) (class_ I64))))
         (((name t6) (type_ I64)) (Reg ((reg R13) (class_ I64))))
         (((name t7) (type_ I64)) (Reg ((reg R14) (class_ I64))))
         (((name t8) (type_ I64)) (Reg ((reg R15) (class_ I64))))
         (((name t9) (type_ I64)) (Reg ((reg R12) (class_ I64))))
         (((name tmp_dst) (type_ I64)) (Reg ((reg RAX) (class_ I64))))
         (((name tmp_dst2) (type_ I64)) (Reg ((reg RAX) (class_ I64))))
         (((name tmp_dst3) (type_ I64)) (Reg ((reg RAX) (class_ I64))))
         (((name tmp_dst4) (type_ I64)) (Reg ((reg RAX) (class_ I64))))
         (((name tmp_dst5) (type_ I64)) (Reg ((reg RAX) (class_ I64))))
         (((name tmp_dst6) (type_ I64)) (Reg ((reg RAX) (class_ I64))))
         (((name tmp_rax) (type_ I64)) (Reg ((reg RAX) (class_ I64))))
         (((name tmp_rax2) (type_ I64)) (Reg ((reg RAX) (class_ I64))))
         (((name tmp_rax3) (type_ I64)) (Reg ((reg RAX) (class_ I64))))
         (((name tmp_rax4) (type_ I64)) (Reg ((reg RAX) (class_ I64))))
         (((name tmp_rax5) (type_ I64)) (Reg ((reg RAX) (class_ I64))))
         (((name tmp_rax6) (type_ I64)) (Reg ((reg RAX) (class_ I64))))
         (((name x) (type_ I64)) (Reg ((reg RDX) (class_ I64))))
         (((name x11) (type_ I64)) (Reg ((reg RDI) (class_ I64)))))))
      ((((name x) (type_ I64)) ((name t1) (type_ I64)))
       (((name x) (type_ I64)) ((name t2) (type_ I64)))
       (((name x) (type_ I64)) ((name t3) (type_ I64)))
       (((name x) (type_ I64)) ((name t4) (type_ I64)))
       (((name x) (type_ I64)) ((name t5) (type_ I64)))
       (((name x) (type_ I64)) ((name t6) (type_ I64)))
       (((name x) (type_ I64)) ((name t7) (type_ I64)))
       (((name x) (type_ I64)) ((name t8) (type_ I64)))
       (((name x) (type_ I64)) ((name tmp_rax) (type_ I64)))
       (((name x) (type_ I64)) ((name tmp_dst) (type_ I64)))
       (((name x) (type_ I64)) ((name m1) (type_ I64)))
       (((name x) (type_ I64)) ((name tmp_rax2) (type_ I64)))
       (((name x) (type_ I64)) ((name tmp_dst2) (type_ I64)))
       (((name x) (type_ I64)) ((name m2) (type_ I64)))
       (((name x) (type_ I64)) ((name tmp_rax3) (type_ I64)))
       (((name x) (type_ I64)) ((name tmp_dst3) (type_ I64)))
       (((name x) (type_ I64)) ((name m3) (type_ I64)))
       (((name x) (type_ I64)) ((name tmp_rax4) (type_ I64)))
       (((name x) (type_ I64)) ((name tmp_dst4) (type_ I64)))
       (((name x) (type_ I64)) ((name m4) (type_ I64)))
       (((name x) (type_ I64)) ((name t9) (type_ I64)))
       (((name x) (type_ I64)) ((name t10) (type_ I64)))
       (((name x) (type_ I64)) ((name t11) (type_ I64)))
       (((name t1) (type_ I64)) ((name t2) (type_ I64)))
       (((name t1) (type_ I64)) ((name t3) (type_ I64)))
       (((name t1) (type_ I64)) ((name t4) (type_ I64)))
       (((name t1) (type_ I64)) ((name t5) (type_ I64)))
       (((name t1) (type_ I64)) ((name t6) (type_ I64)))
       (((name t1) (type_ I64)) ((name t7) (type_ I64)))
       (((name t1) (type_ I64)) ((name t8) (type_ I64)))
       (((name t2) (type_ I64)) ((name t3) (type_ I64)))
       (((name t2) (type_ I64)) ((name t4) (type_ I64)))
       (((name t2) (type_ I64)) ((name t5) (type_ I64)))
       (((name t2) (type_ I64)) ((name t6) (type_ I64)))
       (((name t2) (type_ I64)) ((name t7) (type_ I64)))
       (((name t2) (type_ I64)) ((name t8) (type_ I64)))
       (((name t2) (type_ I64)) ((name tmp_rax) (type_ I64)))
       (((name t3) (type_ I64)) ((name t4) (type_ I64)))
       (((name t3) (type_ I64)) ((name t5) (type_ I64)))
       (((name t3) (type_ I64)) ((name t6) (type_ I64)))
       (((name t3) (type_ I64)) ((name t7) (type_ I64)))
       (((name t3) (type_ I64)) ((name t8) (type_ I64)))
       (((name t3) (type_ I64)) ((name tmp_rax) (type_ I64)))
       (((name t3) (type_ I64)) ((name tmp_dst) (type_ I64)))
       (((name t3) (type_ I64)) ((name m1) (type_ I64)))
       (((name t4) (type_ I64)) ((name t5) (type_ I64)))
       (((name t4) (type_ I64)) ((name t6) (type_ I64)))
       (((name t4) (type_ I64)) ((name t7) (type_ I64)))
       (((name t4) (type_ I64)) ((name t8) (type_ I64)))
       (((name t4) (type_ I64)) ((name tmp_rax) (type_ I64)))
       (((name t4) (type_ I64)) ((name tmp_dst) (type_ I64)))
       (((name t4) (type_ I64)) ((name m1) (type_ I64)))
       (((name t4) (type_ I64)) ((name tmp_rax2) (type_ I64)))
       (((name t5) (type_ I64)) ((name t6) (type_ I64)))
       (((name t5) (type_ I64)) ((name t7) (type_ I64)))
       (((name t5) (type_ I64)) ((name t8) (type_ I64)))
       (((name t5) (type_ I64)) ((name tmp_rax) (type_ I64)))
       (((name t5) (type_ I64)) ((name tmp_dst) (type_ I64)))
       (((name t5) (type_ I64)) ((name m1) (type_ I64)))
       (((name t5) (type_ I64)) ((name tmp_rax2) (type_ I64)))
       (((name t5) (type_ I64)) ((name tmp_dst2) (type_ I64)))
       (((name t5) (type_ I64)) ((name m2) (type_ I64)))
       (((name t6) (type_ I64)) ((name t7) (type_ I64)))
       (((name t6) (type_ I64)) ((name t8) (type_ I64)))
       (((name t6) (type_ I64)) ((name tmp_rax) (type_ I64)))
       (((name t6) (type_ I64)) ((name tmp_dst) (type_ I64)))
       (((name t6) (type_ I64)) ((name m1) (type_ I64)))
       (((name t6) (type_ I64)) ((name tmp_rax2) (type_ I64)))
       (((name t6) (type_ I64)) ((name tmp_dst2) (type_ I64)))
       (((name t6) (type_ I64)) ((name m2) (type_ I64)))
       (((name t6) (type_ I64)) ((name tmp_rax3) (type_ I64)))
       (((name t7) (type_ I64)) ((name t8) (type_ I64)))
       (((name t7) (type_ I64)) ((name tmp_rax) (type_ I64)))
       (((name t7) (type_ I64)) ((name tmp_dst) (type_ I64)))
       (((name t7) (type_ I64)) ((name m1) (type_ I64)))
       (((name t7) (type_ I64)) ((name tmp_rax2) (type_ I64)))
       (((name t7) (type_ I64)) ((name tmp_dst2) (type_ I64)))
       (((name t7) (type_ I64)) ((name m2) (type_ I64)))
       (((name t7) (type_ I64)) ((name tmp_rax3) (type_ I64)))
       (((name t7) (type_ I64)) ((name tmp_dst3) (type_ I64)))
       (((name t7) (type_ I64)) ((name m3) (type_ I64)))
       (((name t8) (type_ I64)) ((name tmp_rax) (type_ I64)))
       (((name t8) (type_ I64)) ((name tmp_dst) (type_ I64)))
       (((name t8) (type_ I64)) ((name m1) (type_ I64)))
       (((name t8) (type_ I64)) ((name tmp_rax2) (type_ I64)))
       (((name t8) (type_ I64)) ((name tmp_dst2) (type_ I64)))
       (((name t8) (type_ I64)) ((name m2) (type_ I64)))
       (((name t8) (type_ I64)) ((name tmp_rax3) (type_ I64)))
       (((name t8) (type_ I64)) ((name tmp_dst3) (type_ I64)))
       (((name t8) (type_ I64)) ((name m3) (type_ I64)))
       (((name t8) (type_ I64)) ((name tmp_rax4) (type_ I64)))
       (((name m1) (type_ I64)) ((name tmp_rax2) (type_ I64)))
       (((name m1) (type_ I64)) ((name tmp_dst2) (type_ I64)))
       (((name m1) (type_ I64)) ((name m2) (type_ I64)))
       (((name m1) (type_ I64)) ((name tmp_rax3) (type_ I64)))
       (((name m1) (type_ I64)) ((name tmp_dst3) (type_ I64)))
       (((name m1) (type_ I64)) ((name m3) (type_ I64)))
       (((name m1) (type_ I64)) ((name tmp_rax4) (type_ I64)))
       (((name m1) (type_ I64)) ((name tmp_dst4) (type_ I64)))
       (((name m1) (type_ I64)) ((name m4) (type_ I64)))
       (((name m1) (type_ I64)) ((name t9) (type_ I64)))
       (((name m1) (type_ I64)) ((name t10) (type_ I64)))
       (((name m1) (type_ I64)) ((name t11) (type_ I64)))
       (((name m1) (type_ I64)) ((name t12) (type_ I64)))
       (((name m1) (type_ I64)) ((name tmp_rax5) (type_ I64)))
       (((name m1) (type_ I64)) ((name tmp_dst5) (type_ I64)))
       (((name m1) (type_ I64)) ((name m5) (type_ I64)))
       (((name m1) (type_ I64)) ((name tmp_rax6) (type_ I64)))
       (((name m1) (type_ I64)) ((name tmp_dst6) (type_ I64)))
       (((name m1) (type_ I64)) ((name m6) (type_ I64)))
       (((name m2) (type_ I64)) ((name tmp_rax3) (type_ I64)))
       (((name m2) (type_ I64)) ((name tmp_dst3) (type_ I64)))
       (((name m2) (type_ I64)) ((name m3) (type_ I64)))
       (((name m2) (type_ I64)) ((name tmp_rax4) (type_ I64)))
       (((name m2) (type_ I64)) ((name tmp_dst4) (type_ I64)))
       (((name m2) (type_ I64)) ((name m4) (type_ I64)))
       (((name m2) (type_ I64)) ((name t9) (type_ I64)))
       (((name m2) (type_ I64)) ((name t10) (type_ I64)))
       (((name m2) (type_ I64)) ((name t11) (type_ I64)))
       (((name m2) (type_ I64)) ((name t12) (type_ I64)))
       (((name m2) (type_ I64)) ((name tmp_rax5) (type_ I64)))
       (((name m2) (type_ I64)) ((name tmp_dst5) (type_ I64)))
       (((name m2) (type_ I64)) ((name m5) (type_ I64)))
       (((name m2) (type_ I64)) ((name tmp_rax6) (type_ I64)))
       (((name m2) (type_ I64)) ((name tmp_dst6) (type_ I64)))
       (((name m2) (type_ I64)) ((name m6) (type_ I64)))
       (((name m2) (type_ I64)) ((name p1) (type_ I64)))
       (((name m3) (type_ I64)) ((name tmp_rax4) (type_ I64)))
       (((name m3) (type_ I64)) ((name tmp_dst4) (type_ I64)))
       (((name m3) (type_ I64)) ((name m4) (type_ I64)))
       (((name m3) (type_ I64)) ((name t9) (type_ I64)))
       (((name m3) (type_ I64)) ((name t10) (type_ I64)))
       (((name m3) (type_ I64)) ((name t11) (type_ I64)))
       (((name m3) (type_ I64)) ((name t12) (type_ I64)))
       (((name m3) (type_ I64)) ((name tmp_rax5) (type_ I64)))
       (((name m3) (type_ I64)) ((name tmp_dst5) (type_ I64)))
       (((name m3) (type_ I64)) ((name m5) (type_ I64)))
       (((name m3) (type_ I64)) ((name tmp_rax6) (type_ I64)))
       (((name m3) (type_ I64)) ((name tmp_dst6) (type_ I64)))
       (((name m3) (type_ I64)) ((name m6) (type_ I64)))
       (((name m3) (type_ I64)) ((name p1) (type_ I64)))
       (((name m4) (type_ I64)) ((name t9) (type_ I64)))
       (((name m4) (type_ I64)) ((name t10) (type_ I64)))
       (((name m4) (type_ I64)) ((name t11) (type_ I64)))
       (((name m4) (type_ I64)) ((name t12) (type_ I64)))
       (((name m4) (type_ I64)) ((name tmp_rax5) (type_ I64)))
       (((name m4) (type_ I64)) ((name tmp_dst5) (type_ I64)))
       (((name m4) (type_ I64)) ((name m5) (type_ I64)))
       (((name m4) (type_ I64)) ((name tmp_rax6) (type_ I64)))
       (((name m4) (type_ I64)) ((name tmp_dst6) (type_ I64)))
       (((name m4) (type_ I64)) ((name m6) (type_ I64)))
       (((name m4) (type_ I64)) ((name p1) (type_ I64)))
       (((name m4) (type_ I64)) ((name p2) (type_ I64)))
       (((name t9) (type_ I64)) ((name t10) (type_ I64)))
       (((name t9) (type_ I64)) ((name t11) (type_ I64)))
       (((name t9) (type_ I64)) ((name t12) (type_ I64)))
       (((name t10) (type_ I64)) ((name t11) (type_ I64)))
       (((name t10) (type_ I64)) ((name t12) (type_ I64)))
       (((name t10) (type_ I64)) ((name tmp_rax5) (type_ I64)))
       (((name t11) (type_ I64)) ((name t12) (type_ I64)))
       (((name t11) (type_ I64)) ((name tmp_rax5) (type_ I64)))
       (((name t11) (type_ I64)) ((name tmp_dst5) (type_ I64)))
       (((name t11) (type_ I64)) ((name m5) (type_ I64)))
       (((name t12) (type_ I64)) ((name tmp_rax5) (type_ I64)))
       (((name t12) (type_ I64)) ((name tmp_dst5) (type_ I64)))
       (((name t12) (type_ I64)) ((name m5) (type_ I64)))
       (((name t12) (type_ I64)) ((name tmp_rax6) (type_ I64)))
       (((name m5) (type_ I64)) ((name tmp_rax6) (type_ I64)))
       (((name m5) (type_ I64)) ((name tmp_dst6) (type_ I64)))
       (((name m5) (type_ I64)) ((name m6) (type_ I64)))
       (((name m5) (type_ I64)) ((name p1) (type_ I64)))
       (((name m5) (type_ I64)) ((name p2) (type_ I64)))
       (((name m6) (type_ I64)) ((name p1) (type_ I64)))
       (((name m6) (type_ I64)) ((name p2) (type_ I64)))
       (((name m6) (type_ I64)) ((name p3) (type_ I64)))
       (((name p1) (type_ I64)) ((name p2) (type_ I64)))
       (((name p1) (type_ I64)) ((name p3) (type_ I64)))
       (((name p2) (type_ I64)) ((name p3) (type_ I64)))
       (((name p2) (type_ I64)) ((name q1) (type_ I64)))
       (((name p3) (type_ I64)) ((name q1) (type_ I64)))
       (((name p3) (type_ I64)) ((name result) (type_ I64))))
      |}]
;;

let%expect_test "borked" =
  compile_and_lower ~opt_flags:Eir.Opt_flags.no_opt borked;
  [%expect
    {|
    .intel_syntax noprefix
    .text
    .globl root
    root:
      push rbp
      push r12
      push r13
      push r14
      push r15
      mov rbp, rsp
      add rbp, 40
      mov rdx, rdi
    root___root:
      mov r8, rdx
      add r8, 1
      mov r9, rdx
      add r9, 2
      mov r10, rdx
      add r10, 3
      mov r11, rdx
      add r11, 4
      mov r12, rdx
      add r12, 5
      mov r13, rdx
      add r13, 6
      mov r14, rdx
      add r14, 7
      mov r15, rdx
      add r15, 8
      mov rax, r8
      imul r9
      mov r8, rax
      mov rax, r10
      imul r11
      mov r9, rax
      mov rax, r12
      imul r13
      mov r10, rax
      mov rax, r14
      imul r15
      mov r11, rax
      mov r12, rdx
      add r12, 9
      mov r14, rdx
      add r14, 10
      mov r13, rdx
      add r13, 11
      mov r15, rdx
      add r15, 12
      mov rax, r12
      imul r14
      mov r14, rax
      mov rax, r13
      imul r15
      mov r12, rax
      mov r15, r8
      add r15, r9
      mov r13, r10
      add r13, r11
      add r14, r12
      add r15, r13
      add r15, r14
      mov rax, r15
    root__root__epilogue:
      mov rsp, rbp
      sub rsp, 40
      pop r15
      pop r14
      pop r13
      pop r12
      pop rbp
      ret
    .section .note.GNU-stack,"",@progbits
    |}]
;;

let%expect_test "debug borked opt ssa" =
  test_ssa ~don't_opt:() borked;
  [%expect
    {|
    (%root
     (instrs
      ((Add
        ((dest ((name t1) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 1))))
       (Add
        ((dest ((name t2) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 2))))
       (Add
        ((dest ((name t3) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 3))))
       (Add
        ((dest ((name t4) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 4))))
       (Add
        ((dest ((name t5) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 5))))
       (Add
        ((dest ((name t6) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 6))))
       (Add
        ((dest ((name t7) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 7))))
       (Add
        ((dest ((name t8) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 8))))
       (Mul
        ((dest ((name m1) (type_ I64))) (src1 (Var ((name t1) (type_ I64))))
         (src2 (Var ((name t2) (type_ I64))))))
       (Mul
        ((dest ((name m2) (type_ I64))) (src1 (Var ((name t3) (type_ I64))))
         (src2 (Var ((name t4) (type_ I64))))))
       (Mul
        ((dest ((name m3) (type_ I64))) (src1 (Var ((name t5) (type_ I64))))
         (src2 (Var ((name t6) (type_ I64))))))
       (Mul
        ((dest ((name m4) (type_ I64))) (src1 (Var ((name t7) (type_ I64))))
         (src2 (Var ((name t8) (type_ I64))))))
       (Add
        ((dest ((name t9) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 9))))
       (Add
        ((dest ((name t10) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 10))))
       (Add
        ((dest ((name t11) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 11))))
       (Add
        ((dest ((name t12) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 12))))
       (Mul
        ((dest ((name m5) (type_ I64))) (src1 (Var ((name t9) (type_ I64))))
         (src2 (Var ((name t10) (type_ I64))))))
       (Mul
        ((dest ((name m6) (type_ I64))) (src1 (Var ((name t11) (type_ I64))))
         (src2 (Var ((name t12) (type_ I64))))))
       (Add
        ((dest ((name p1) (type_ I64))) (src1 (Var ((name m1) (type_ I64))))
         (src2 (Var ((name m2) (type_ I64))))))
       (Add
        ((dest ((name p2) (type_ I64))) (src1 (Var ((name m3) (type_ I64))))
         (src2 (Var ((name m4) (type_ I64))))))
       (Add
        ((dest ((name p3) (type_ I64))) (src1 (Var ((name m5) (type_ I64))))
         (src2 (Var ((name m6) (type_ I64))))))
       (Add
        ((dest ((name q1) (type_ I64))) (src1 (Var ((name p1) (type_ I64))))
         (src2 (Var ((name p2) (type_ I64))))))
       (Add
        ((dest ((name result) (type_ I64))) (src1 (Var ((name q1) (type_ I64))))
         (src2 (Var ((name p3) (type_ I64))))))
       (Return (Var ((name result) (type_ I64)))))))
    =================================
    (%root (args (((name x) (type_ I64))))
     (instrs
      ((Add
        ((dest ((name t1) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 1))))
       (Add
        ((dest ((name t2) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 2))))
       (Add
        ((dest ((name t3) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 3))))
       (Add
        ((dest ((name t4) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 4))))
       (Add
        ((dest ((name t5) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 5))))
       (Add
        ((dest ((name t6) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 6))))
       (Add
        ((dest ((name t7) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 7))))
       (Add
        ((dest ((name t8) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 8))))
       (Mul
        ((dest ((name m1) (type_ I64))) (src1 (Var ((name t1) (type_ I64))))
         (src2 (Var ((name t2) (type_ I64))))))
       (Mul
        ((dest ((name m2) (type_ I64))) (src1 (Var ((name t3) (type_ I64))))
         (src2 (Var ((name t4) (type_ I64))))))
       (Mul
        ((dest ((name m3) (type_ I64))) (src1 (Var ((name t5) (type_ I64))))
         (src2 (Var ((name t6) (type_ I64))))))
       (Mul
        ((dest ((name m4) (type_ I64))) (src1 (Var ((name t7) (type_ I64))))
         (src2 (Var ((name t8) (type_ I64))))))
       (Add
        ((dest ((name t9) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 9))))
       (Add
        ((dest ((name t10) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 10))))
       (Add
        ((dest ((name t11) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 11))))
       (Add
        ((dest ((name t12) (type_ I64))) (src1 (Var ((name x) (type_ I64))))
         (src2 (Lit 12))))
       (Mul
        ((dest ((name m5) (type_ I64))) (src1 (Var ((name t9) (type_ I64))))
         (src2 (Var ((name t10) (type_ I64))))))
       (Mul
        ((dest ((name m6) (type_ I64))) (src1 (Var ((name t11) (type_ I64))))
         (src2 (Var ((name t12) (type_ I64))))))
       (Add
        ((dest ((name p1) (type_ I64))) (src1 (Var ((name m1) (type_ I64))))
         (src2 (Var ((name m2) (type_ I64))))))
       (Add
        ((dest ((name p2) (type_ I64))) (src1 (Var ((name m3) (type_ I64))))
         (src2 (Var ((name m4) (type_ I64))))))
       (Add
        ((dest ((name p3) (type_ I64))) (src1 (Var ((name m5) (type_ I64))))
         (src2 (Var ((name m6) (type_ I64))))))
       (Add
        ((dest ((name q1) (type_ I64))) (src1 (Var ((name p1) (type_ I64))))
         (src2 (Var ((name p2) (type_ I64))))))
       (Add
        ((dest ((name result) (type_ I64))) (src1 (Var ((name q1) (type_ I64))))
         (src2 (Var ((name p3) (type_ I64))))))
       (Return (Var ((name result) (type_ I64)))))))
    |}]
;;

let%expect_test "debug borked opt x86" =
  test ~opt_flags:Eir.Opt_flags.no_opt borked;
  [%expect
    {|
    (((call_conv Default)
      (root
       ((root__prologue (args (((name x11) (type_ I64))))
         (instrs
          ((X86 (PUSH (Reg ((reg RBP) (class_ I64)))))
           (X86 (PUSH (Reg ((reg R12) (class_ I64)))))
           (X86 (PUSH (Reg ((reg R13) (class_ I64)))))
           (X86 (PUSH (Reg ((reg R14) (class_ I64)))))
           (X86 (PUSH (Reg ((reg R15) (class_ I64)))))
           (X86
            (MOV (Reg ((reg RBP) (class_ I64))) (Reg ((reg RSP) (class_ I64)))))
           (X86 (ADD (Reg ((reg RBP) (class_ I64))) (Imm 40)))
           (X86
            (MOV (Reg ((reg RDI) (class_ I64))) (Reg ((reg RDI) (class_ I64)))))
           (X86 (Tag_def NOOP (Reg ((reg RBP) (class_ I64)))))
           (X86
            (MOV (Reg ((reg RDX) (class_ I64))) (Reg ((reg RDI) (class_ I64)))))
           (X86
            (JMP
             ((block ((id_hum %root) (args (((name x) (type_ I64)))))) (args ())))))))
        (%root (args (((name x) (type_ I64))))
         (instrs
          ((X86
            (MOV (Reg ((reg R8) (class_ I64))) (Reg ((reg RDX) (class_ I64)))))
           (X86 (ADD (Reg ((reg R8) (class_ I64))) (Imm 1)))
           (X86
            (MOV (Reg ((reg R9) (class_ I64))) (Reg ((reg RDX) (class_ I64)))))
           (X86 (ADD (Reg ((reg R9) (class_ I64))) (Imm 2)))
           (X86
            (MOV (Reg ((reg R10) (class_ I64))) (Reg ((reg RDX) (class_ I64)))))
           (X86 (ADD (Reg ((reg R10) (class_ I64))) (Imm 3)))
           (X86
            (MOV (Reg ((reg R11) (class_ I64))) (Reg ((reg RDX) (class_ I64)))))
           (X86 (ADD (Reg ((reg R11) (class_ I64))) (Imm 4)))
           (X86
            (MOV (Reg ((reg R12) (class_ I64))) (Reg ((reg RDX) (class_ I64)))))
           (X86 (ADD (Reg ((reg R12) (class_ I64))) (Imm 5)))
           (X86
            (MOV (Reg ((reg R13) (class_ I64))) (Reg ((reg RDX) (class_ I64)))))
           (X86 (ADD (Reg ((reg R13) (class_ I64))) (Imm 6)))
           (X86
            (MOV (Reg ((reg R14) (class_ I64))) (Reg ((reg RDX) (class_ I64)))))
           (X86 (ADD (Reg ((reg R14) (class_ I64))) (Imm 7)))
           (X86
            (MOV (Reg ((reg R15) (class_ I64))) (Reg ((reg RDX) (class_ I64)))))
           (X86 (ADD (Reg ((reg R15) (class_ I64))) (Imm 8)))
           (X86
            (MOV (Reg ((reg RAX) (class_ I64))) (Reg ((reg R8) (class_ I64)))))
           (X86
            (Tag_def
             (Tag_use (IMUL (Reg ((reg R9) (class_ I64))))
              (Reg ((reg RAX) (class_ I64))))
             (Reg ((reg RAX) (class_ I64)))))
           (X86
            (MOV (Reg ((reg R8) (class_ I64))) (Reg ((reg RAX) (class_ I64)))))
           (X86
            (MOV (Reg ((reg RAX) (class_ I64))) (Reg ((reg R10) (class_ I64)))))
           (X86
            (Tag_def
             (Tag_use (IMUL (Reg ((reg R11) (class_ I64))))
              (Reg ((reg RAX) (class_ I64))))
             (Reg ((reg RAX) (class_ I64)))))
           (X86
            (MOV (Reg ((reg R9) (class_ I64))) (Reg ((reg RAX) (class_ I64)))))
           (X86
            (MOV (Reg ((reg RAX) (class_ I64))) (Reg ((reg R12) (class_ I64)))))
           (X86
            (Tag_def
             (Tag_use (IMUL (Reg ((reg R13) (class_ I64))))
              (Reg ((reg RAX) (class_ I64))))
             (Reg ((reg RAX) (class_ I64)))))
           (X86
            (MOV (Reg ((reg R10) (class_ I64))) (Reg ((reg RAX) (class_ I64)))))
           (X86
            (MOV (Reg ((reg RAX) (class_ I64))) (Reg ((reg R14) (class_ I64)))))
           (X86
            (Tag_def
             (Tag_use (IMUL (Reg ((reg R15) (class_ I64))))
              (Reg ((reg RAX) (class_ I64))))
             (Reg ((reg RAX) (class_ I64)))))
           (X86
            (MOV (Reg ((reg R11) (class_ I64))) (Reg ((reg RAX) (class_ I64)))))
           (X86
            (MOV (Reg ((reg R12) (class_ I64))) (Reg ((reg RDX) (class_ I64)))))
           (X86 (ADD (Reg ((reg R12) (class_ I64))) (Imm 9)))
           (X86
            (MOV (Reg ((reg R14) (class_ I64))) (Reg ((reg RDX) (class_ I64)))))
           (X86 (ADD (Reg ((reg R14) (class_ I64))) (Imm 10)))
           (X86
            (MOV (Reg ((reg R13) (class_ I64))) (Reg ((reg RDX) (class_ I64)))))
           (X86 (ADD (Reg ((reg R13) (class_ I64))) (Imm 11)))
           (X86
            (MOV (Reg ((reg R15) (class_ I64))) (Reg ((reg RDX) (class_ I64)))))
           (X86 (ADD (Reg ((reg R15) (class_ I64))) (Imm 12)))
           (X86
            (MOV (Reg ((reg RAX) (class_ I64))) (Reg ((reg R12) (class_ I64)))))
           (X86
            (Tag_def
             (Tag_use (IMUL (Reg ((reg R14) (class_ I64))))
              (Reg ((reg RAX) (class_ I64))))
             (Reg ((reg RAX) (class_ I64)))))
           (X86
            (MOV (Reg ((reg R14) (class_ I64))) (Reg ((reg RAX) (class_ I64)))))
           (X86
            (MOV (Reg ((reg RAX) (class_ I64))) (Reg ((reg R13) (class_ I64)))))
           (X86
            (Tag_def
             (Tag_use (IMUL (Reg ((reg R15) (class_ I64))))
              (Reg ((reg RAX) (class_ I64))))
             (Reg ((reg RAX) (class_ I64)))))
           (X86
            (MOV (Reg ((reg R12) (class_ I64))) (Reg ((reg RAX) (class_ I64)))))
           (X86
            (MOV (Reg ((reg R15) (class_ I64))) (Reg ((reg R8) (class_ I64)))))
           (X86
            (ADD (Reg ((reg R15) (class_ I64))) (Reg ((reg R9) (class_ I64)))))
           (X86
            (MOV (Reg ((reg R13) (class_ I64))) (Reg ((reg R10) (class_ I64)))))
           (X86
            (ADD (Reg ((reg R13) (class_ I64))) (Reg ((reg R11) (class_ I64)))))
           (X86
            (MOV (Reg ((reg R14) (class_ I64))) (Reg ((reg R14) (class_ I64)))))
           (X86
            (ADD (Reg ((reg R14) (class_ I64))) (Reg ((reg R12) (class_ I64)))))
           (X86
            (MOV (Reg ((reg R15) (class_ I64))) (Reg ((reg R15) (class_ I64)))))
           (X86
            (ADD (Reg ((reg R15) (class_ I64))) (Reg ((reg R13) (class_ I64)))))
           (X86
            (MOV (Reg ((reg R15) (class_ I64))) (Reg ((reg R15) (class_ I64)))))
           (X86
            (ADD (Reg ((reg R15) (class_ I64))) (Reg ((reg R14) (class_ I64)))))
           (X86
            (MOV (Reg ((reg RAX) (class_ I64))) (Reg ((reg R15) (class_ I64)))))
           (X86_terminal
            ((JMP
              ((block
                ((id_hum root__epilogue) (args (((name res__0) (type_ I64))))))
               (args ()))))))))
        (root__epilogue (args (((name res__0) (type_ I64))))
         (instrs
          ((X86
            (MOV (Reg ((reg RAX) (class_ I64))) (Reg ((reg RAX) (class_ I64)))))
           (X86
            (MOV (Reg ((reg RSP) (class_ I64))) (Reg ((reg RBP) (class_ I64)))))
           (X86 (SUB (Reg ((reg RSP) (class_ I64))) (Imm 40)))
           (X86 (POP ((reg R15) (class_ I64))))
           (X86 (POP ((reg R14) (class_ I64))))
           (X86 (POP ((reg R13) (class_ I64))))
           (X86 (POP ((reg R12) (class_ I64))))
           (X86 (POP ((reg RBP) (class_ I64))))
           (X86 (RET ((Reg ((reg RAX) (class_ I64)))))))))))
      (args (((name x) (type_ I64)))) (name root) (prologue ()) (epilogue ())
      (bytes_alloca'd 0) (bytes_for_spills 0) (bytes_for_clobber_saves 40)))
    |}]
;;

let%expect_test "debug borked" =
  match Nod.compile ~opt_flags:Eir.Opt_flags.no_opt borked with
  | Error e -> Nod_error.to_string e |> print_endline
  | Ok functions ->
    X86_backend.For_testing.print_selected_instructions functions;
    [%expect
      {|
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | block          | instruction                                                                                                                                                                                                                       | live_in                                                                                                                                                                                                      | live_out                                                                                                                                                                                                     |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | root__prologue | (block start(args(((name x11)(type_ I64)))))                                                                                                                                                                                      | {}                                                                                                                                                                                                           | {}                                                                                                                                                                                                           |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | root__prologue | (X86(MOV(Reg((reg(Allocated((name x11)(type_ I64))(RDI)))(class_ I64)))(Reg((reg RDI)(class_ I64)))))                                                                                                                             | {}                                                                                                                                                                                                           | (((name x11)(type_ I64)))                                                                                                                                                                                    |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | root__prologue | (X86(Tag_def NOOP(Reg((reg RBP)(class_ I64)))))                                                                                                                                                                                   | (((name x11)(type_ I64)))                                                                                                                                                                                    | (((name x11)(type_ I64)))                                                                                                                                                                                    |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | root__prologue | (X86(MOV(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x11)(type_ I64))))(class_ I64)))))                                                                                                  | (((name x11)(type_ I64)))                                                                                                                                                                                    | (((name x11)(type_ I64)))                                                                                                                                                                                    |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | root__prologue | (X86(JMP((block((id_hum %root)(args(((name x)(type_ I64))))))(args(((name x11)(type_ I64)))))))                                                                                                                                   | (((name x11)(type_ I64)))                                                                                                                                                                                    | {}                                                                                                                                                                                                           |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | root__prologue | block end                                                                                                                                                                                                                         | {}                                                                                                                                                                                                           | {}                                                                                                                                                                                                           |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (block start(args(((name x)(type_ I64)))))                                                                                                                                                                                        | {}                                                                                                                                                                                                           | (((name x)(type_ I64)))                                                                                                                                                                                      |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t1)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                   | (((name x)(type_ I64)))                                                                                                                                                                                      | (((name x)(type_ I64))((name t1)(type_ I64)))                                                                                                                                                                |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t1)(type_ I64))))(class_ I64)))(Imm 1)))                                                                                                                                                      | (((name x)(type_ I64))((name t1)(type_ I64)))                                                                                                                                                                | (((name x)(type_ I64))((name t1)(type_ I64)))                                                                                                                                                                |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t2)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                   | (((name x)(type_ I64))((name t1)(type_ I64)))                                                                                                                                                                | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64)))                                                                                                                                          |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t2)(type_ I64))))(class_ I64)))(Imm 2)))                                                                                                                                                      | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64)))                                                                                                                                          | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64)))                                                                                                                                          |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t3)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                   | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64)))                                                                                                                                          | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64)))                                                                                                                    |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t3)(type_ I64))))(class_ I64)))(Imm 3)))                                                                                                                                                      | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64)))                                                                                                                    | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64)))                                                                                                                    |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t4)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                   | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64)))                                                                                                                    | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64)))                                                                                              |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t4)(type_ I64))))(class_ I64)))(Imm 4)))                                                                                                                                                      | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64)))                                                                                              | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64)))                                                                                              |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t5)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                   | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64)))                                                                                              | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64)))                                                                        |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t5)(type_ I64))))(class_ I64)))(Imm 5)))                                                                                                                                                      | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64)))                                                                        | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64)))                                                                        |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t6)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                   | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64)))                                                                        | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64)))                                                  |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t6)(type_ I64))))(class_ I64)))(Imm 6)))                                                                                                                                                      | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64)))                                                  | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64)))                                                  |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t7)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                   | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64)))                                                  | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64)))                            |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t7)(type_ I64))))(class_ I64)))(Imm 7)))                                                                                                                                                      | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64)))                            | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64)))                            |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t8)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                   | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64)))                            | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64)))      |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t8)(type_ I64))))(class_ I64)))(Imm 8)))                                                                                                                                                      | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64)))      | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64)))      |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Allocated((name tmp_rax)(type_ I64))(RAX)))(class_ I64)))(Reg((reg(Unallocated((name t1)(type_ I64))))(class_ I64)))))                                                                                          | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64)))      | (((name x)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name tmp_rax)(type_ I64))) |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(Tag_def(Tag_use(IMUL(Reg((reg(Unallocated((name t2)(type_ I64))))(class_ I64))))(Reg((reg(Allocated((name tmp_rax)(type_ I64))(RAX)))(class_ I64))))(Reg((reg(Allocated((name tmp_dst)(type_ I64))(RAX)))(class_ I64)))))    | (((name x)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name tmp_rax)(type_ I64))) | (((name x)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name tmp_dst)(type_ I64)))                       |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name m1)(type_ I64))))(class_ I64)))(Reg((reg(Allocated((name tmp_dst)(type_ I64))(RAX)))(class_ I64)))))                                                                                          | (((name x)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name tmp_dst)(type_ I64)))                       | (((name x)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64)))                            |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Allocated((name tmp_rax2)(type_ I64))(RAX)))(class_ I64)))(Reg((reg(Unallocated((name t3)(type_ I64))))(class_ I64)))))                                                                                         | (((name x)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64)))                            | (((name x)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name tmp_rax2)(type_ I64)))                      |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(Tag_def(Tag_use(IMUL(Reg((reg(Unallocated((name t4)(type_ I64))))(class_ I64))))(Reg((reg(Allocated((name tmp_rax2)(type_ I64))(RAX)))(class_ I64))))(Reg((reg(Allocated((name tmp_dst2)(type_ I64))(RAX)))(class_ I64)))))  | (((name x)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name tmp_rax2)(type_ I64)))                      | (((name x)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name tmp_dst2)(type_ I64)))                                            |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name m2)(type_ I64))))(class_ I64)))(Reg((reg(Allocated((name tmp_dst2)(type_ I64))(RAX)))(class_ I64)))))                                                                                         | (((name x)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name tmp_dst2)(type_ I64)))                                            | (((name x)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64)))                                                  |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Allocated((name tmp_rax3)(type_ I64))(RAX)))(class_ I64)))(Reg((reg(Unallocated((name t5)(type_ I64))))(class_ I64)))))                                                                                         | (((name x)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64)))                                                  | (((name x)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name tmp_rax3)(type_ I64)))                                            |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(Tag_def(Tag_use(IMUL(Reg((reg(Unallocated((name t6)(type_ I64))))(class_ I64))))(Reg((reg(Allocated((name tmp_rax3)(type_ I64))(RAX)))(class_ I64))))(Reg((reg(Allocated((name tmp_dst3)(type_ I64))(RAX)))(class_ I64)))))  | (((name x)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name tmp_rax3)(type_ I64)))                                            | (((name x)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name tmp_dst3)(type_ I64)))                                                                  |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name m3)(type_ I64))))(class_ I64)))(Reg((reg(Allocated((name tmp_dst3)(type_ I64))(RAX)))(class_ I64)))))                                                                                         | (((name x)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name tmp_dst3)(type_ I64)))                                                                  | (((name x)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64)))                                                                        |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Allocated((name tmp_rax4)(type_ I64))(RAX)))(class_ I64)))(Reg((reg(Unallocated((name t7)(type_ I64))))(class_ I64)))))                                                                                         | (((name x)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64)))                                                                        | (((name x)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name tmp_rax4)(type_ I64)))                                                                  |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(Tag_def(Tag_use(IMUL(Reg((reg(Unallocated((name t8)(type_ I64))))(class_ I64))))(Reg((reg(Allocated((name tmp_rax4)(type_ I64))(RAX)))(class_ I64))))(Reg((reg(Allocated((name tmp_dst4)(type_ I64))(RAX)))(class_ I64)))))  | (((name x)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name tmp_rax4)(type_ I64)))                                                                  | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name tmp_dst4)(type_ I64)))                                                                                        |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name m4)(type_ I64))))(class_ I64)))(Reg((reg(Allocated((name tmp_dst4)(type_ I64))(RAX)))(class_ I64)))))                                                                                         | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name tmp_dst4)(type_ I64)))                                                                                        | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64)))                                                                                              |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t9)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                   | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64)))                                                                                              | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64)))                                                                        |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t9)(type_ I64))))(class_ I64)))(Imm 9)))                                                                                                                                                      | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64)))                                                                        | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64)))                                                                        |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t10)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                  | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64)))                                                                        | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64)))                                                 |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t10)(type_ I64))))(class_ I64)))(Imm 10)))                                                                                                                                                    | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64)))                                                 | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64)))                                                 |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t11)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                  | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64)))                                                 | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64))((name t11)(type_ I64)))                          |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t11)(type_ I64))))(class_ I64)))(Imm 11)))                                                                                                                                                    | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64))((name t11)(type_ I64)))                          | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64))((name t11)(type_ I64)))                          |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t12)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                  | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64))((name t11)(type_ I64)))                          | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64))((name t11)(type_ I64))((name t12)(type_ I64)))                        |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t12)(type_ I64))))(class_ I64)))(Imm 12)))                                                                                                                                                    | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64))((name t11)(type_ I64))((name t12)(type_ I64)))                        | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64))((name t11)(type_ I64))((name t12)(type_ I64)))                        |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Allocated((name tmp_rax5)(type_ I64))(RAX)))(class_ I64)))(Reg((reg(Unallocated((name t9)(type_ I64))))(class_ I64)))))                                                                                         | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64))((name t11)(type_ I64))((name t12)(type_ I64)))                        | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t10)(type_ I64))((name t11)(type_ I64))((name t12)(type_ I64))((name tmp_rax5)(type_ I64)))                  |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(Tag_def(Tag_use(IMUL(Reg((reg(Unallocated((name t10)(type_ I64))))(class_ I64))))(Reg((reg(Allocated((name tmp_rax5)(type_ I64))(RAX)))(class_ I64))))(Reg((reg(Allocated((name tmp_dst5)(type_ I64))(RAX)))(class_ I64))))) | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t10)(type_ I64))((name t11)(type_ I64))((name t12)(type_ I64))((name tmp_rax5)(type_ I64)))                  | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t11)(type_ I64))((name t12)(type_ I64))((name tmp_dst5)(type_ I64)))                                         |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name m5)(type_ I64))))(class_ I64)))(Reg((reg(Allocated((name tmp_dst5)(type_ I64))(RAX)))(class_ I64)))))                                                                                         | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t11)(type_ I64))((name t12)(type_ I64))((name tmp_dst5)(type_ I64)))                                         | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t11)(type_ I64))((name t12)(type_ I64))((name m5)(type_ I64)))                                               |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Allocated((name tmp_rax6)(type_ I64))(RAX)))(class_ I64)))(Reg((reg(Unallocated((name t11)(type_ I64))))(class_ I64)))))                                                                                        | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t11)(type_ I64))((name t12)(type_ I64))((name m5)(type_ I64)))                                               | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t12)(type_ I64))((name m5)(type_ I64))((name tmp_rax6)(type_ I64)))                                          |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(Tag_def(Tag_use(IMUL(Reg((reg(Unallocated((name t12)(type_ I64))))(class_ I64))))(Reg((reg(Allocated((name tmp_rax6)(type_ I64))(RAX)))(class_ I64))))(Reg((reg(Allocated((name tmp_dst6)(type_ I64))(RAX)))(class_ I64))))) | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t12)(type_ I64))((name m5)(type_ I64))((name tmp_rax6)(type_ I64)))                                          | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name m5)(type_ I64))((name tmp_dst6)(type_ I64)))                                                                 |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name m6)(type_ I64))))(class_ I64)))(Reg((reg(Allocated((name tmp_dst6)(type_ I64))(RAX)))(class_ I64)))))                                                                                         | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name m5)(type_ I64))((name tmp_dst6)(type_ I64)))                                                                 | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name m5)(type_ I64))((name m6)(type_ I64)))                                                                       |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name p1)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name m1)(type_ I64))))(class_ I64)))))                                                                                                  | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name m5)(type_ I64))((name m6)(type_ I64)))                                                                       | (((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name m5)(type_ I64))((name m6)(type_ I64))((name p1)(type_ I64)))                                                                       |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name p1)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name m2)(type_ I64))))(class_ I64)))))                                                                                                  | (((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name m5)(type_ I64))((name m6)(type_ I64))((name p1)(type_ I64)))                                                                       | (((name m3)(type_ I64))((name m4)(type_ I64))((name m5)(type_ I64))((name m6)(type_ I64))((name p1)(type_ I64)))                                                                                             |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name p2)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name m3)(type_ I64))))(class_ I64)))))                                                                                                  | (((name m3)(type_ I64))((name m4)(type_ I64))((name m5)(type_ I64))((name m6)(type_ I64))((name p1)(type_ I64)))                                                                                             | (((name m4)(type_ I64))((name m5)(type_ I64))((name m6)(type_ I64))((name p1)(type_ I64))((name p2)(type_ I64)))                                                                                             |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name p2)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name m4)(type_ I64))))(class_ I64)))))                                                                                                  | (((name m4)(type_ I64))((name m5)(type_ I64))((name m6)(type_ I64))((name p1)(type_ I64))((name p2)(type_ I64)))                                                                                             | (((name m5)(type_ I64))((name m6)(type_ I64))((name p1)(type_ I64))((name p2)(type_ I64)))                                                                                                                   |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name p3)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name m5)(type_ I64))))(class_ I64)))))                                                                                                  | (((name m5)(type_ I64))((name m6)(type_ I64))((name p1)(type_ I64))((name p2)(type_ I64)))                                                                                                                   | (((name m6)(type_ I64))((name p1)(type_ I64))((name p2)(type_ I64))((name p3)(type_ I64)))                                                                                                                   |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name p3)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name m6)(type_ I64))))(class_ I64)))))                                                                                                  | (((name m6)(type_ I64))((name p1)(type_ I64))((name p2)(type_ I64))((name p3)(type_ I64)))                                                                                                                   | (((name p1)(type_ I64))((name p2)(type_ I64))((name p3)(type_ I64)))                                                                                                                                         |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name q1)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name p1)(type_ I64))))(class_ I64)))))                                                                                                  | (((name p1)(type_ I64))((name p2)(type_ I64))((name p3)(type_ I64)))                                                                                                                                         | (((name p2)(type_ I64))((name p3)(type_ I64))((name q1)(type_ I64)))                                                                                                                                         |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name q1)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name p2)(type_ I64))))(class_ I64)))))                                                                                                  | (((name p2)(type_ I64))((name p3)(type_ I64))((name q1)(type_ I64)))                                                                                                                                         | (((name p3)(type_ I64))((name q1)(type_ I64)))                                                                                                                                                               |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name result)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name q1)(type_ I64))))(class_ I64)))))                                                                                              | (((name p3)(type_ I64))((name q1)(type_ I64)))                                                                                                                                                               | (((name p3)(type_ I64))((name result)(type_ I64)))                                                                                                                                                           |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name result)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name p3)(type_ I64))))(class_ I64)))))                                                                                              | (((name p3)(type_ I64))((name result)(type_ I64)))                                                                                                                                                           | (((name result)(type_ I64)))                                                                                                                                                                                 |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name res__0)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name result)(type_ I64))))(class_ I64)))))                                                                                          | (((name result)(type_ I64)))                                                                                                                                                                                 | (((name result)(type_ I64)))                                                                                                                                                                                 |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86_terminal((JMP((block((id_hum root__epilogue)(args(((name res__0)(type_ I64))))))(args(((name result)(type_ I64))))))))                                                                                                       | (((name result)(type_ I64)))                                                                                                                                                                                 | {}                                                                                                                                                                                                           |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | block end                                                                                                                                                                                                                         | {}                                                                                                                                                                                                           | {}                                                                                                                                                                                                           |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | root__epilogue | (block start(args(((name res__0)(type_ I64)))))                                                                                                                                                                                   | {}                                                                                                                                                                                                           | (((name res__0)(type_ I64)))                                                                                                                                                                                 |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | root__epilogue | (X86(MOV(Reg((reg RAX)(class_ I64)))(Reg((reg(Allocated((name res__0)(type_ I64))(RAX)))(class_ I64)))))                                                                                                                          | (((name res__0)(type_ I64)))                                                                                                                                                                                 | (((name res__0)(type_ I64)))                                                                                                                                                                                 |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | root__epilogue | (X86(RET((Reg((reg(Allocated((name res__0)(type_ I64))(RAX)))(class_ I64))))))                                                                                                                                                    | (((name res__0)(type_ I64)))                                                                                                                                                                                 | {}                                                                                                                                                                                                           |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | root__epilogue | block end                                                                                                                                                                                                                         | {}                                                                                                                                                                                                           | {}                                                                                                                                                                                                           |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      |}]
;;

let%expect_test "debug borked opt" =
  match Nod.compile ~opt_flags:Eir.Opt_flags.default borked with
  | Error e -> Nod_error.to_string e |> print_endline
  | Ok functions ->
    X86_backend.For_testing.print_selected_instructions functions;
    [%expect
      {|
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | block          | instruction                                                                                                                                                                                                                       | live_in                                                                                                                                                                                                      | live_out                                                                                                                                                                                                     |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | root__prologue | (block start(args(((name x11)(type_ I64)))))                                                                                                                                                                                      | {}                                                                                                                                                                                                           | {}                                                                                                                                                                                                           |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | root__prologue | (X86(MOV(Reg((reg(Allocated((name x11)(type_ I64))(RDI)))(class_ I64)))(Reg((reg RDI)(class_ I64)))))                                                                                                                             | {}                                                                                                                                                                                                           | (((name x11)(type_ I64)))                                                                                                                                                                                    |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | root__prologue | (X86(Tag_def NOOP(Reg((reg RBP)(class_ I64)))))                                                                                                                                                                                   | (((name x11)(type_ I64)))                                                                                                                                                                                    | (((name x11)(type_ I64)))                                                                                                                                                                                    |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | root__prologue | (X86(MOV(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x11)(type_ I64))))(class_ I64)))))                                                                                                  | (((name x11)(type_ I64)))                                                                                                                                                                                    | (((name x11)(type_ I64)))                                                                                                                                                                                    |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | root__prologue | (X86(JMP((block((id_hum %root)(args(((name x)(type_ I64))))))(args(((name x11)(type_ I64)))))))                                                                                                                                   | (((name x11)(type_ I64)))                                                                                                                                                                                    | {}                                                                                                                                                                                                           |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | root__prologue | block end                                                                                                                                                                                                                         | {}                                                                                                                                                                                                           | {}                                                                                                                                                                                                           |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (block start(args(((name x)(type_ I64)))))                                                                                                                                                                                        | {}                                                                                                                                                                                                           | (((name x)(type_ I64)))                                                                                                                                                                                      |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t1)(type_ I64))))(class_ I64)))(Imm 1)))                                                                                                                                                      | (((name x)(type_ I64)))                                                                                                                                                                                      | (((name x)(type_ I64))((name t1)(type_ I64)))                                                                                                                                                                |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t1)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                   | (((name x)(type_ I64))((name t1)(type_ I64)))                                                                                                                                                                | (((name x)(type_ I64))((name t1)(type_ I64)))                                                                                                                                                                |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t2)(type_ I64))))(class_ I64)))(Imm 2)))                                                                                                                                                      | (((name x)(type_ I64))((name t1)(type_ I64)))                                                                                                                                                                | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64)))                                                                                                                                          |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t2)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                   | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64)))                                                                                                                                          | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64)))                                                                                                                                          |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t3)(type_ I64))))(class_ I64)))(Imm 3)))                                                                                                                                                      | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64)))                                                                                                                                          | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64)))                                                                                                                    |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t3)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                   | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64)))                                                                                                                    | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64)))                                                                                                                    |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t4)(type_ I64))))(class_ I64)))(Imm 4)))                                                                                                                                                      | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64)))                                                                                                                    | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64)))                                                                                              |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t4)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                   | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64)))                                                                                              | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64)))                                                                                              |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t5)(type_ I64))))(class_ I64)))(Imm 5)))                                                                                                                                                      | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64)))                                                                                              | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64)))                                                                        |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t5)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                   | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64)))                                                                        | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64)))                                                                        |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t6)(type_ I64))))(class_ I64)))(Imm 6)))                                                                                                                                                      | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64)))                                                                        | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64)))                                                  |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t6)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                   | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64)))                                                  | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64)))                                                  |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t7)(type_ I64))))(class_ I64)))(Imm 7)))                                                                                                                                                      | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64)))                                                  | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64)))                            |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t7)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                   | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64)))                            | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64)))                            |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t8)(type_ I64))))(class_ I64)))(Imm 8)))                                                                                                                                                      | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64)))                            | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64)))      |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t8)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                   | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64)))      | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64)))      |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Allocated((name tmp_rax)(type_ I64))(RAX)))(class_ I64)))(Reg((reg(Unallocated((name t1)(type_ I64))))(class_ I64)))))                                                                                          | (((name x)(type_ I64))((name t1)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64)))      | (((name x)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name tmp_rax)(type_ I64))) |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(Tag_def(Tag_use(IMUL(Reg((reg(Unallocated((name t2)(type_ I64))))(class_ I64))))(Reg((reg(Allocated((name tmp_rax)(type_ I64))(RAX)))(class_ I64))))(Reg((reg(Allocated((name tmp_dst)(type_ I64))(RAX)))(class_ I64)))))    | (((name x)(type_ I64))((name t2)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name tmp_rax)(type_ I64))) | (((name x)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name tmp_dst)(type_ I64)))                       |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name m1)(type_ I64))))(class_ I64)))(Reg((reg(Allocated((name tmp_dst)(type_ I64))(RAX)))(class_ I64)))))                                                                                          | (((name x)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name tmp_dst)(type_ I64)))                       | (((name x)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64)))                            |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Allocated((name tmp_rax2)(type_ I64))(RAX)))(class_ I64)))(Reg((reg(Unallocated((name t3)(type_ I64))))(class_ I64)))))                                                                                         | (((name x)(type_ I64))((name t3)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64)))                            | (((name x)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name tmp_rax2)(type_ I64)))                      |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(Tag_def(Tag_use(IMUL(Reg((reg(Unallocated((name t4)(type_ I64))))(class_ I64))))(Reg((reg(Allocated((name tmp_rax2)(type_ I64))(RAX)))(class_ I64))))(Reg((reg(Allocated((name tmp_dst2)(type_ I64))(RAX)))(class_ I64)))))  | (((name x)(type_ I64))((name t4)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name tmp_rax2)(type_ I64)))                      | (((name x)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name tmp_dst2)(type_ I64)))                                            |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name m2)(type_ I64))))(class_ I64)))(Reg((reg(Allocated((name tmp_dst2)(type_ I64))(RAX)))(class_ I64)))))                                                                                         | (((name x)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name tmp_dst2)(type_ I64)))                                            | (((name x)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64)))                                                  |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Allocated((name tmp_rax3)(type_ I64))(RAX)))(class_ I64)))(Reg((reg(Unallocated((name t5)(type_ I64))))(class_ I64)))))                                                                                         | (((name x)(type_ I64))((name t5)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64)))                                                  | (((name x)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name tmp_rax3)(type_ I64)))                                            |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(Tag_def(Tag_use(IMUL(Reg((reg(Unallocated((name t6)(type_ I64))))(class_ I64))))(Reg((reg(Allocated((name tmp_rax3)(type_ I64))(RAX)))(class_ I64))))(Reg((reg(Allocated((name tmp_dst3)(type_ I64))(RAX)))(class_ I64)))))  | (((name x)(type_ I64))((name t6)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name tmp_rax3)(type_ I64)))                                            | (((name x)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name tmp_dst3)(type_ I64)))                                                                  |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name m3)(type_ I64))))(class_ I64)))(Reg((reg(Allocated((name tmp_dst3)(type_ I64))(RAX)))(class_ I64)))))                                                                                         | (((name x)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name tmp_dst3)(type_ I64)))                                                                  | (((name x)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64)))                                                                        |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Allocated((name tmp_rax4)(type_ I64))(RAX)))(class_ I64)))(Reg((reg(Unallocated((name t7)(type_ I64))))(class_ I64)))))                                                                                         | (((name x)(type_ I64))((name t7)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64)))                                                                        | (((name x)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name tmp_rax4)(type_ I64)))                                                                  |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(Tag_def(Tag_use(IMUL(Reg((reg(Unallocated((name t8)(type_ I64))))(class_ I64))))(Reg((reg(Allocated((name tmp_rax4)(type_ I64))(RAX)))(class_ I64))))(Reg((reg(Allocated((name tmp_dst4)(type_ I64))(RAX)))(class_ I64)))))  | (((name x)(type_ I64))((name t8)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name tmp_rax4)(type_ I64)))                                                                  | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name tmp_dst4)(type_ I64)))                                                                                        |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name m4)(type_ I64))))(class_ I64)))(Reg((reg(Allocated((name tmp_dst4)(type_ I64))(RAX)))(class_ I64)))))                                                                                         | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name tmp_dst4)(type_ I64)))                                                                                        | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64)))                                                                                              |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t9)(type_ I64))))(class_ I64)))(Imm 9)))                                                                                                                                                      | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64)))                                                                                              | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64)))                                                                        |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t9)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                   | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64)))                                                                        | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64)))                                                                        |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t10)(type_ I64))))(class_ I64)))(Imm 10)))                                                                                                                                                    | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64)))                                                                        | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64)))                                                 |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t10)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                  | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64)))                                                 | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64)))                                                 |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t11)(type_ I64))))(class_ I64)))(Imm 11)))                                                                                                                                                    | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64)))                                                 | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64))((name t11)(type_ I64)))                          |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t11)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                  | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64))((name t11)(type_ I64)))                          | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64))((name t11)(type_ I64)))                          |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name t12)(type_ I64))))(class_ I64)))(Imm 12)))                                                                                                                                                    | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64))((name t11)(type_ I64)))                          | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64))((name t11)(type_ I64))((name t12)(type_ I64)))   |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name t12)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name x)(type_ I64))))(class_ I64)))))                                                                                                  | (((name x)(type_ I64))((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64))((name t11)(type_ I64))((name t12)(type_ I64)))   | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64))((name t11)(type_ I64))((name t12)(type_ I64)))                        |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Allocated((name tmp_rax5)(type_ I64))(RAX)))(class_ I64)))(Reg((reg(Unallocated((name t9)(type_ I64))))(class_ I64)))))                                                                                         | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t9)(type_ I64))((name t10)(type_ I64))((name t11)(type_ I64))((name t12)(type_ I64)))                        | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t10)(type_ I64))((name t11)(type_ I64))((name t12)(type_ I64))((name tmp_rax5)(type_ I64)))                  |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(Tag_def(Tag_use(IMUL(Reg((reg(Unallocated((name t10)(type_ I64))))(class_ I64))))(Reg((reg(Allocated((name tmp_rax5)(type_ I64))(RAX)))(class_ I64))))(Reg((reg(Allocated((name tmp_dst5)(type_ I64))(RAX)))(class_ I64))))) | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t10)(type_ I64))((name t11)(type_ I64))((name t12)(type_ I64))((name tmp_rax5)(type_ I64)))                  | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t11)(type_ I64))((name t12)(type_ I64))((name tmp_dst5)(type_ I64)))                                         |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name m5)(type_ I64))))(class_ I64)))(Reg((reg(Allocated((name tmp_dst5)(type_ I64))(RAX)))(class_ I64)))))                                                                                         | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t11)(type_ I64))((name t12)(type_ I64))((name tmp_dst5)(type_ I64)))                                         | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t11)(type_ I64))((name t12)(type_ I64))((name m5)(type_ I64)))                                               |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Allocated((name tmp_rax6)(type_ I64))(RAX)))(class_ I64)))(Reg((reg(Unallocated((name t11)(type_ I64))))(class_ I64)))))                                                                                        | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t11)(type_ I64))((name t12)(type_ I64))((name m5)(type_ I64)))                                               | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t12)(type_ I64))((name m5)(type_ I64))((name tmp_rax6)(type_ I64)))                                          |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(Tag_def(Tag_use(IMUL(Reg((reg(Unallocated((name t12)(type_ I64))))(class_ I64))))(Reg((reg(Allocated((name tmp_rax6)(type_ I64))(RAX)))(class_ I64))))(Reg((reg(Allocated((name tmp_dst6)(type_ I64))(RAX)))(class_ I64))))) | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name t12)(type_ I64))((name m5)(type_ I64))((name tmp_rax6)(type_ I64)))                                          | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name m5)(type_ I64))((name tmp_dst6)(type_ I64)))                                                                 |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name m6)(type_ I64))))(class_ I64)))(Reg((reg(Allocated((name tmp_dst6)(type_ I64))(RAX)))(class_ I64)))))                                                                                         | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name m5)(type_ I64))((name tmp_dst6)(type_ I64)))                                                                 | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name m5)(type_ I64))((name m6)(type_ I64)))                                                                       |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name p1)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name m1)(type_ I64))))(class_ I64)))))                                                                                                  | (((name m1)(type_ I64))((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name m5)(type_ I64))((name m6)(type_ I64)))                                                                       | (((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name m5)(type_ I64))((name m6)(type_ I64))((name p1)(type_ I64)))                                                                       |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name p1)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name m2)(type_ I64))))(class_ I64)))))                                                                                                  | (((name m2)(type_ I64))((name m3)(type_ I64))((name m4)(type_ I64))((name m5)(type_ I64))((name m6)(type_ I64))((name p1)(type_ I64)))                                                                       | (((name m3)(type_ I64))((name m4)(type_ I64))((name m5)(type_ I64))((name m6)(type_ I64))((name p1)(type_ I64)))                                                                                             |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name p2)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name m3)(type_ I64))))(class_ I64)))))                                                                                                  | (((name m3)(type_ I64))((name m4)(type_ I64))((name m5)(type_ I64))((name m6)(type_ I64))((name p1)(type_ I64)))                                                                                             | (((name m4)(type_ I64))((name m5)(type_ I64))((name m6)(type_ I64))((name p1)(type_ I64))((name p2)(type_ I64)))                                                                                             |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name p2)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name m4)(type_ I64))))(class_ I64)))))                                                                                                  | (((name m4)(type_ I64))((name m5)(type_ I64))((name m6)(type_ I64))((name p1)(type_ I64))((name p2)(type_ I64)))                                                                                             | (((name m5)(type_ I64))((name m6)(type_ I64))((name p1)(type_ I64))((name p2)(type_ I64)))                                                                                                                   |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name p3)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name m5)(type_ I64))))(class_ I64)))))                                                                                                  | (((name m5)(type_ I64))((name m6)(type_ I64))((name p1)(type_ I64))((name p2)(type_ I64)))                                                                                                                   | (((name m6)(type_ I64))((name p1)(type_ I64))((name p2)(type_ I64))((name p3)(type_ I64)))                                                                                                                   |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name p3)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name m6)(type_ I64))))(class_ I64)))))                                                                                                  | (((name m6)(type_ I64))((name p1)(type_ I64))((name p2)(type_ I64))((name p3)(type_ I64)))                                                                                                                   | (((name p1)(type_ I64))((name p2)(type_ I64))((name p3)(type_ I64)))                                                                                                                                         |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name q1)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name p1)(type_ I64))))(class_ I64)))))                                                                                                  | (((name p1)(type_ I64))((name p2)(type_ I64))((name p3)(type_ I64)))                                                                                                                                         | (((name p2)(type_ I64))((name p3)(type_ I64))((name q1)(type_ I64)))                                                                                                                                         |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name q1)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name p2)(type_ I64))))(class_ I64)))))                                                                                                  | (((name p2)(type_ I64))((name p3)(type_ I64))((name q1)(type_ I64)))                                                                                                                                         | (((name p3)(type_ I64))((name q1)(type_ I64)))                                                                                                                                                               |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name result)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name q1)(type_ I64))))(class_ I64)))))                                                                                              | (((name p3)(type_ I64))((name q1)(type_ I64)))                                                                                                                                                               | (((name p3)(type_ I64))((name result)(type_ I64)))                                                                                                                                                           |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(ADD(Reg((reg(Unallocated((name result)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name p3)(type_ I64))))(class_ I64)))))                                                                                              | (((name p3)(type_ I64))((name result)(type_ I64)))                                                                                                                                                           | (((name result)(type_ I64)))                                                                                                                                                                                 |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86(MOV(Reg((reg(Unallocated((name res__0)(type_ I64))))(class_ I64)))(Reg((reg(Unallocated((name result)(type_ I64))))(class_ I64)))))                                                                                          | (((name result)(type_ I64)))                                                                                                                                                                                 | (((name result)(type_ I64)))                                                                                                                                                                                 |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | (X86_terminal((JMP((block((id_hum root__epilogue)(args(((name res__0)(type_ I64))))))(args(((name result)(type_ I64))))))))                                                                                                       | (((name result)(type_ I64)))                                                                                                                                                                                 | {}                                                                                                                                                                                                           |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | %root          | block end                                                                                                                                                                                                                         | {}                                                                                                                                                                                                           | {}                                                                                                                                                                                                           |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | root__epilogue | (block start(args(((name res__0)(type_ I64)))))                                                                                                                                                                                   | {}                                                                                                                                                                                                           | (((name res__0)(type_ I64)))                                                                                                                                                                                 |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | root__epilogue | (X86(MOV(Reg((reg RAX)(class_ I64)))(Reg((reg(Allocated((name res__0)(type_ I64))(RAX)))(class_ I64)))))                                                                                                                          | (((name res__0)(type_ I64)))                                                                                                                                                                                 | (((name res__0)(type_ I64)))                                                                                                                                                                                 |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | root__epilogue | (X86(RET((Reg((reg(Allocated((name res__0)(type_ I64))(RAX)))(class_ I64))))))                                                                                                                                                    | (((name res__0)(type_ I64)))                                                                                                                                                                                 | {}                                                                                                                                                                                                           |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | root__epilogue | block end                                                                                                                                                                                                                         | {}                                                                                                                                                                                                           | {}                                                                                                                                                                                                           |
      +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      |}]
;;
